# test
name: CI

on: [push]

jobs:

  linux:
    runs-on: ubuntu-latest
    steps:
      - name: Install Multipass
        run: sudo snap install multipass --classic
      - name: Install Multipass
        run: sudo snap install docker
      - name: Checkout
        uses: actions/checkout@v1
      - name: Checkout Submodules
        run: git submodule update --init --recursive --remote
      - name: Test
        run:  bash -c "ci/check_bats.bash"

  macos:
    runs-on: macos-latest
    steps:
      - name: Install Multipass
        run: brew cask install multipass
      - name: Checkout
        uses: actions/checkout@v1
      - name: Checkout Submodules
        run: git submodule update --init --recursive --remote
      - name: Test
        run: bash -c "ci/check_bats.bash"

  install_windows:
    runs-on: windows-latest
    steps:
      - name: Install Multipass
        run: choco install git.portable
      - name: Checkout
        uses: actions/checkout@v1
      - name: Checkout Submodules
        run: git submodule update --init --recursive --remote
      - name: Test
        run: bash -c "ci/check_bats.bash"




